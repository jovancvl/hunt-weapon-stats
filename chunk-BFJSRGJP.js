import{a as P,b as L}from"./chunk-TMJYDWVB.js";import{c as k,e as A}from"./chunk-XCDCRKI6.js";import{a as I}from"./chunk-K6LNP5VG.js";import{Ba as c,Hb as s,Jb as v,Kb as w,Pa as h,W as R,Ya as S,Za as _,a as C,b as D,bb as p,cb as i,db as m,eb as f,lb as u,ma as x,mc as N,nb as M,qc as O,wb as g,yb as E}from"./chunk-JHKUOANW.js";var b=class r{ammo=w.required();rangeSelected=v();chartOptions={xAxis:{type:"value",min:0,max:100,name:"Range",nameLocation:"start",interval:10,splitLine:{show:!1}},yAxis:{type:"value",min:0,max:150,name:"Damage",nameLocation:"middle",interval:25,splitLine:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"none"},formatter:t=>{let e=t[0],n=Math.floor(e.value[1]),o=e.value[0];return`Damage: ${n}
Range: ${o}m`}},grid:{left:0,top:0,right:0,bottom:50},visualMap:[{pieces:[{gt:0,lte:50,color:"#ECEFF1"},{gt:50,lte:75,color:"#CCFF90"},{gt:75,lte:100,color:"#64DD17"},{gt:100,lte:125,color:"#FFD600"},{gt:125,lte:150,color:"#FF6D00"},{gt:150,color:"#DD2C00"}],outOfRange:{color:"#999"},show:!1}]};config=x(()=>{let t=this.ammo().getDamageArray();this.chartOptions=D(C({},this.chartOptions),{series:[{name:"Damage",type:"line",smooth:!0,symbol:"emptyCircle",showSymbol:!1,lineStyle:{width:4},data:t.map((e,n)=>[n,e]),markLine:{symbol:"none",z:0,animationDuration:500,animationEasing:"sinusoidalInOut",lineStyle:{color:"#303030",type:"dashed",width:1},label:{show:!1},emphasis:{lineStyle:{color:"#606060",width:2},label:{show:!0,position:"bottom",align:"center",verticalAlign:"top",distance:41,color:"white",borderWidth:0,formatter:e=>e.name}},data:this.calculateCombinations()}}]})});calculateCombinations(){let t=[],e=["chest","cock","arms","legs"];for(let n=0;n<e.length;n++)for(let o=n;o<e.length;o++){let a=e[n],l=e[o],d=this.findRange(a,l);if(d>0&&d<=100){a=a==="cock"?"crotch":a,l=l==="cock"?"crotch":l;let $=`${d}m

${a} + ${l}`;t.push({xAxis:d,name:$})}}return t}findRange(t,e){let n=!1,o=0;for(;o<=100&&!n;){let a=this.ammo().calculateDamage(o)[t],l=this.ammo().calculateDamage(o)[e];a+l<150?n=!0:o++}return n&&o--,o}onChartClick(t){if(t.componentType!=="series"&&t.componentType!=="markLine")return;let e=Array.isArray(t.value)?t.value[0]:t.value;this.rangeSelected.emit(e)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["hunt-chart-component"]],inputs:{ammo:[1,"ammo"]},outputs:{rangeSelected:"rangeSelected"},decls:2,vars:1,consts:[[1,"chart-container"],["echarts","",1,"chart",3,"chartClick","options"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1),u("chartClick",function(a){return n.onChartClick(a)}),m()()),e&2&&(c(),p("options",n.chartOptions))},dependencies:[L],styles:[".chart-container[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box;padding:.5rem 1rem 0 0}.chart[_ngcontent-%COMP%]{height:400px;width:100%}"]})};function j(r,t){if(r&1&&(i(0,"p"),g(1," For example: "),f(2,"br"),g(3),f(4,"br"),m()),r&2){let e=M();c(3),E(" This weapon will down a hunter with 2 shots up to ",e.chestChestRange()," if both shots hit the chest. ")}}var y=class r{ammo=w.required();rangeSelected=v();chestChestRange=s(()=>this.findRange("chest","chest"));cockCockRange=s(()=>this.findRange("cock","cock"));armArmRange=s(()=>this.findRange("arms","arms"));legLegRange=s(()=>this.findRange("legs","legs"));chestCockRange=s(()=>this.findRange("chest","cock"));chestArmRange=s(()=>this.findRange("chest","arms"));chestLegRange=s(()=>this.findRange("chest","legs"));cockArmRange=s(()=>this.findRange("cock","arms"));cockLegRange=s(()=>this.findRange("cock","legs"));armLegRange=s(()=>this.findRange("arms","legs"));findRange(t,e){let n=!1,o=0;for(;o<100&&!n;){let l=this.ammo().calculateDamage(o)[t],d=this.ammo().calculateDamage(o)[e];l+d<150?n=!0:o++}let a=o-1;return a<0?"not possible":a===99&&!n?"100m+":`${a}m`}onRangeSelected(t){this.rangeSelected.emit(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["hunt-weapon-extended-info-component"]],inputs:{ammo:[1,"ammo"]},outputs:{rangeSelected:"rangeSelected"},decls:10,vars:2,consts:[[1,"right",3,"rangeSelected","ammo"]],template:function(e,n){e&1&&(i(0,"h1"),g(1,"Damage Information"),m(),i(2,"hunt-chart-component",0),u("rangeSelected",function(a){return n.onRangeSelected(a)}),m(),i(3,"h2"),g(4,"Note"),m(),i(5,"p"),g(6,` If you want to see the damage done to limbs at different ranges, just click on the line at your desired range.
`),m(),i(7,"p"),g(8,` The vertical dashed lines represent the different thresholds for downing a full HP hunter with 2 shots. Hover over the vertical lines to see which bodypart combination the threshold corresponds to.
`),m(),S(9,j,5,1,"p")),e&2&&(c(2),p("ammo",n.ammo()),c(7),_(n.chestChestRange()!=="not possible"?9:-1))},dependencies:[b],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{padding:0px 1rem}"]})};var F=class r{activatedRoute=R(k);router=R(A);weapon=N.EMPTY;range=0;constructor(){let t=this.activatedRoute.snapshot.paramMap.get("id");if(!t)throw alert("weapon name not set, reload the page"),new Error("weapon name not set");let e=O.get(t);if(!e){alert("weapon name not found"),this.router.navigate([""]);return}this.weapon=Object.assign(C({},e))}onRangeSelected(t){this.range=t}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["hunt-weapon-stats-page"]],decls:4,vars:5,consts:[[1,"content-container"],[1,"left",3,"weapon","showCustomAmmo"],[1,"middle",3,"ammo","range"],[3,"rangeSelected","ammo"]],template:function(e,n){e&1&&(i(0,"div",0),f(1,"hunt-weapon-info-component",1)(2,"hunt-hunter-body-component",2),i(3,"hunt-weapon-extended-info-component",3),u("rangeSelected",function(a){return n.onRangeSelected(a)}),m()()),e&2&&(c(),p("weapon",n.weapon)("showCustomAmmo",!0),c(),p("ammo",n.weapon.activeAmmo)("range",n.range),c(),p("ammo",n.weapon.activeAmmo))},dependencies:[I,P,y],styles:[".content-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(400px,30vw) minmax(400px,25vw) minmax(400px,45vw)}.content-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding:0 1rem}.content-container[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.content-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding:0 1rem}"]})};export{F as WeaponStatsPage};
